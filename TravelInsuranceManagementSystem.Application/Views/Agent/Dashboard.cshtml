@*
 *@
@{
    ViewData["Title"] = "Agent Dashboard";
    Layout = "~/Views/Shared/_AgentLayout.cshtml";
}

<style>
    /* SUMMARY CARDS */
    .summary-card {
        background: #ffffff;
        border-radius: 14px;
        padding: 18px;
        box-shadow: 0 6px 18px rgba(0,0,0,.08);
        text-align: center;
    }

    .summary-title {
        font-size: 14px;
        color: #6c757d;
    }

    .summary-value {
        font-size: 22px;
        font-weight: 700;
        margin-top: 5px;
    }

    /* FILTER BUTTONS */
    .dashboard-filters .btn {
        margin-left: 6px;
        border-radius: 20px;
    }

        .dashboard-filters .btn.active {
            background: #1a73e8;
            color: white;
        }

    /* ACTIVITY TABLE */
    .activity-type {
        font-weight: 600;
    }

    /* BADGES — added to make statuses visible */
    .badge {
        display: inline-block;
        padding: 6px 10px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        line-height: 1;
    }

    .badge-active {
        background-color: #d1e7dd; /* green-ish */
        color: #0f5132;
    }

    .badge-pending {
        background-color: #fff3cd; /* yellow-ish */
        color: #664d03;
    }

    .badge-approved,
    .badge-resolved {
        background-color: #e2e3e5; /* grey-ish */
        color: #343a40;
    }
</style>

<!-- PAGE TITLE -->
<div class="page-title">Dashboard</div>

<!-- SEARCH + FILTER -->
<div class="row align-items-center mb-3">
    <div class="col-md-6">
        <input type="text" id="dashboardSearch" class="form-control"
               placeholder="Search recent activity..." />
    </div>

    <div class="col-md-6 text-end dashboard-filters">
        <button class="btn btn-outline-primary btn-sm active filter-btn" data-status="all">All</button>
        <button class="btn btn-outline-success btn-sm filter-btn" data-status="active">Active</button>
        <button class="btn btn-outline-warning btn-sm filter-btn" data-status="pending">Pending</button>
        <button class="btn btn-outline-secondary btn-sm filter-btn" data-status="resolved">Resolved</button>
    </div>
</div>

<!-- SUMMARY -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="summary-card">
            <div class="summary-title">Active Policies</div>
            <div class="summary-value">132</div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="summary-card">
            <div class="summary-title">Open Claims</div>
            <div class="summary-value">7</div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="summary-card">
            <div class="summary-title">Payments Today</div>
            <div class="summary-value">₹48,500</div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="summary-card">
            <div class="summary-title">Support Tickets</div>
            <div class="summary-value">5</div>
        </div>
    </div>
</div>

<!-- RECENT ACTIVITY TABLE -->
<div class="table-responsive">
    <table class="table table-bordered align-middle" id="dashboardTable">
        <thead>
            <tr>
                <th>Type</th>
                <th>Reference</th>
                <th>Customer</th>
                <th>Date</th>
                <th>Status</th>
            </tr>
        </thead>

        <tbody>
            <tr>
                <td class="activity-type">Policy</td>
                <td>P01842</td>
                <td>Senem</td>
                <td>2025-12-20</td>
                <td class="status"><span class="badge badge-active">Active</span></td>
            </tr>

            <tr>
                <td class="activity-type">Claim</td>
                <td>C01016</td>
                <td>Alex</td>
                <td>2025-12-21</td>
                <td class="status"><span class="badge badge-pending">Pending</span></td>
            </tr>

            <tr>
                <td class="activity-type">Ticket</td>
                <td>T01900</td>
                <td>Harold</td>
                <td>2025-12-22</td>
                <td class="status"><span class="badge badge-approved">Resolved</span></td>
            </tr>
        </tbody>
    </table>
</div>



@section Scripts {
    <script>
        /* SEARCH */
        $("#dashboardSearch").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#dashboardTable tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
            });
        });

        /* FILTER */
        $(".filter-btn").click(function () {

            $(".filter-btn").removeClass("active");
            $(this).addClass("active");

            var status = $(this).data("status");

            if (status === "all") {
                $("#dashboardTable tbody tr").show();
                return;
            }

            $("#dashboardTable tbody tr").each(function () {
                var rowStatus = $(this).find(".status").text().toLowerCase();
                $(this).toggle(rowStatus.includes(status));
            });
        });
    </script>
}
